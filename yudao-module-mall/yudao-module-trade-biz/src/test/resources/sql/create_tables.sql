CREATE TABLE IF NOT EXISTS "trade_order" (
     "id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
     "no" varchar NOT NULL,
     "type" int NOT NULL,
     "terminal" int NOT NULL,
     "user_id" bigint NOT NULL,
     "user_ip" varchar NOT NULL,
     "user_remark" varchar,
     "status" int NOT NULL,
     "product_count" int NOT NULL,
     "cancel_type" int,
     "remark" varchar,
     "pay_status" bit NOT NULL,
     "pay_time" datetime,
     "finish_time" datetime,
     "cancel_time" datetime,
     "original_price" int NOT NULL,
     "order_price" int NOT NULL,
     "discount_price" int NOT NULL,
     "delivery_price" int NOT NULL,
     "adjust_price" int NOT NULL,
     "pay_price" int NOT NULL,
     "pay_order_id" bigint,
     "pay_channel_code" varchar,
     "delivery_template_id" bigint,
     "logistics_id" bigint,
     "logistics_no" varchar,
     "delivery_time" datetime,
     "receive_time" datetime,
     "receiver_name" varchar NOT NULL,
     "receiver_mobile" varchar NOT NULL,
     "receiver_area_id" int NOT NULL,
     "receiver_post_code" int,
     "receiver_detail_address" varchar NOT NULL,
     "after_sale_status" int NOT NULL,
     "refund_price" int NOT NULL,
     "coupon_id" bigint NOT NULL,
     "coupon_price" int NOT NULL,
     "point_price" int NOT NULL,
     "creator" varchar DEFAULT '',
     "create_time" datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
     "updater" varchar DEFAULT '',
     "update_time" datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
     "deleted" bit NOT NULL DEFAULT FALSE,
     PRIMARY KEY ("id")
) COMMENT '交易订单表';

-- 交易订单明细表
CREATE TABLE IF NOT EXISTS `trade_order_item` (
                                                  `id` BIGINT NOT NULL AUTO_INCREMENT,
                                                  `user_id` BIGINT NOT NULL,
                                                  `order_id` BIGINT NOT NULL,
                                                  `spu_id` BIGINT NOT NULL,
                                                  `spu_name` VARCHAR(255) NOT NULL,
    `sku_id` BIGINT NOT NULL,
    `properties` VARCHAR(255),
    `pic_url` VARCHAR(255),
    `count` INT NOT NULL,
    `original_price` INT NOT NULL,
    `original_unit_price` INT NOT NULL,
    `discount_price` INT NOT NULL,
    `pay_price` INT NOT NULL,
    `order_part_price` INT NOT NULL,
    `order_divide_price` INT NOT NULL,
    `after_sale_status` INT NOT NULL,
    `creator` VARCHAR(255) DEFAULT '',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updater` VARCHAR(255) DEFAULT '',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `deleted` BIT NOT NULL DEFAULT FALSE,
    PRIMARY KEY (`id`)
    ) COMMENT '交易订单明细表';

-- 交易售后表
CREATE TABLE IF NOT EXISTS `trade_after_sale` (
                                                  `id` BIGINT NOT NULL AUTO_INCREMENT,
                                                  `no` VARCHAR(255) NOT NULL,
    `status` INT NOT NULL,
    `type` INT NOT NULL,
    `way` INT NOT NULL,
    `user_id` BIGINT NOT NULL,
    `apply_reason` VARCHAR(255) NOT NULL,
    `apply_description` VARCHAR(255),
    `apply_pic_urls` VARCHAR(255),
    `order_id` BIGINT NOT NULL,
    `order_no` VARCHAR(255) NOT NULL,
    `order_item_id` BIGINT NOT NULL,
    `spu_id` BIGINT NOT NULL,
    `spu_name` VARCHAR(255) NOT NULL,
    `sku_id` BIGINT NOT NULL,
    `properties` VARCHAR(255),
    `pic_url` VARCHAR(255),
    `count` INT NOT NULL,
    `audit_time` VARCHAR(255),
    `audit_user_id` BIGINT,
    `audit_reason` VARCHAR(255),
    `refund_price` INT NOT NULL,
    `pay_refund_id` BIGINT,
    `refund_time` VARCHAR(255),
    `logistics_id` BIGINT,
    `logistics_no` VARCHAR(255),
    `delivery_time` VARCHAR(255),
    `receive_time` VARCHAR(255),
    `receive_reason` VARCHAR(255),
    `creator` VARCHAR(255) DEFAULT '',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updater` VARCHAR(255) DEFAULT '',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `deleted` BIT NOT NULL DEFAULT FALSE,
    PRIMARY KEY (`id`)
    ) COMMENT '交易售后表';

-- 交易售后日志
CREATE TABLE IF NOT EXISTS `trade_after_sale_log` (
                                                      `id` BIGINT NOT NULL AUTO_INCREMENT,
                                                      `user_id` BIGINT NOT NULL,
                                                      `user_type` INT NOT NULL,
                                                      `after_sale_id` BIGINT NOT NULL,
                                                      `order_id` BIGINT NOT NULL,
                                                      `order_item_id` BIGINT NOT NULL,
                                                      `before_status` INT,
                                                      `after_status` INT NOT NULL,
                                                      `content` VARCHAR(255) NOT NULL,
    `creator` VARCHAR(255) DEFAULT '',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updater` VARCHAR(255) DEFAULT '',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `deleted` BIT NOT NULL DEFAULT FALSE,
    PRIMARY KEY (`id`)
    ) COMMENT '交易售后日志';

-- 分销用户
CREATE TABLE IF NOT EXISTS `trade_brokerage_user` (
                                                      `id` BIGINT NOT NULL AUTO_INCREMENT,
                                                      `bind_user_id` BIGINT NOT NULL,
                                                      `bind_user_time` VARCHAR(255),
    `brokerage_enabled` BIT NOT NULL,
    `brokerage_time` VARCHAR(255),
    `price` INT NOT NULL,
    `frozen_price` INT NOT NULL,
    `creator` VARCHAR(255) DEFAULT '',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updater` VARCHAR(255) DEFAULT '',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `deleted` BIT NOT NULL DEFAULT FALSE,
    `tenant_id` BIGINT NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
    ) COMMENT '分销用户';

-- 佣金记录
CREATE TABLE IF NOT EXISTS `trade_brokerage_record` (
                                                        `id` INT NOT NULL AUTO_INCREMENT,
                                                        `user_id` BIGINT NOT NULL,
                                                        `biz_id` VARCHAR(255) NOT NULL,
    `biz_type` VARCHAR(255) NOT NULL,
    `title` VARCHAR(255) NOT NULL,
    `price` INT NOT NULL,
    `total_price` INT NOT NULL,
    `description` VARCHAR(255) NOT NULL,
    `status` VARCHAR(255) NOT NULL,
    `frozen_days` INT NOT NULL,
    `unfreeze_time` VARCHAR(255),
    `creator` VARCHAR(255) DEFAULT '',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updater` VARCHAR(255) DEFAULT '',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `deleted` BIT NOT NULL DEFAULT FALSE,
    `tenant_id` BIGINT NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
    ) COMMENT '佣金记录';

-- 佣金提现
CREATE TABLE IF NOT EXISTS `trade_brokerage_withdraw` (
                                                          `id` INT NOT NULL AUTO_INCREMENT,
                                                          `user_id` BIGINT NOT NULL,
                                                          `price` INT NOT NULL,
                                                          `fee_price` INT NOT NULL,
                                                          `total_price` INT NOT NULL,
                                                          `type` VARCHAR(255) NOT NULL,
    `name` VARCHAR(255),
    `account_no` VARCHAR(255),
    `bank_name` VARCHAR(255),
    `bank_address` VARCHAR(255),
    `account_qr_code_url` VARCHAR(255),
    `status` VARCHAR(255) NOT NULL,
    `audit_reason` VARCHAR(255),
    `audit_time` VARCHAR(255),
    `remark` VARCHAR(255),
    `creator` VARCHAR(255) DEFAULT '',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updater` VARCHAR(255) DEFAULT '',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `deleted` BIT NOT NULL DEFAULT FALSE,
    `tenant_id` BIGINT NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
    ) COMMENT '佣金提现';

